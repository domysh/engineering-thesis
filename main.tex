\PassOptionsToPackage{table, dvipsnames}{xcolor}
\documentclass[a4paper,twoside,12pt]{vendor/toptesi}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[italian]{babel}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{float}
\usetikzlibrary{positioning}
\usepackage{pgfplots}
\usepackage[newfloat,outputdir=build]{minted}
\usepackage[font=small,skip=1pt]{caption}
\captionsetup[listing]{position=top}
\usepackage{subcaption}
\usepackage{xspace}
\usepackage{fontawesome5}
\usepackage{minted}
\usepackage[numbers]{natbib}
\usepackage{etoolbox}
\usepackage{listings}
\usepackage{lmodern}

\pgfplotsset{compat=1.18}

\SetupFloatingEnvironment{listing}{name=Codice}

\usepackage{hyperref}

\usepackage[acronym,toc,nomain,nonumberlist,nopostdot]{glossaries}
\makeglossaries

\hypersetup{
    colorlinks = true,
    allcolors=black
}

\hyphenation{di-spo-si-ti-vi}

%%% workaround for listing
% save the current meaning of \listing
\let\savedlisting\listing
% at the right spot, restore the meaning
\AtBeginDocument{\let\listing\savedlisting}
%%% end of workaround


\def\dept{Dipartimento di Ingegneria Elettrica e dell’Informazione}
\def\course{Corso di Laurea triennale in Ingegneria Informatica e dell’Automazione}
\def\title{DIFESA DI SISTEMI INFORMATIVI TRAMITE FIREWALL IN COMPETIZIONI ATTACCO/DIFESA}
\def\author{Domingo Dirutigliano}
\def\prof{Chiar.mo Prof.\ Gennaro Boggia}
\def\supervisor{Dott. Ing. Daniele Pugliese}
\def\subject{RETI DI TELECOMUNICAZIONI}
\def\annoacc{2024\ -\ 2025}
\def\beforecandidate{Laureando}
\def\beforetitle{Tesi di Laurea in}
\def\beforeprof{Relatore}
\def\beforesupervisor{Correlatore}
\def\beforeannoacc{Anno Accademico}

\makeatletter
\def\cleardoublepage{\clearpage\if@twoside\ifodd\c@page\else
    \hbox{}
    \vspace*{\fill}
    \vspace{\fill}
    \thispagestyle{empty}
    \newpage
    \if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother

\makeatletter
\renewcommand{\@makefntext}[1]{%
  \scriptsize
  \parindent1em%
  \noindent\hb@xt@1.8em{\@makefnmark\hss}#1%
}
\makeatother


\begin{document}

\newcommand{\footcite}[2]{\textsuperscript{\citenum{#2}}\let\thefootnote\relax\footnote{\cite{#2} #1}}
\newcommand{\footciteref}[1]{\textsuperscript{\citenum{#1}}}
%\maketitle


\input{front}
\input{acronyms}
% \cleardoublepage
% \input{dedica}
% \cleardoublepage

\pagenumbering{roman}
\input{abstract}


\cleardoublepage{}
\tableofcontents

\begingroup
\renewcommand\lstlistlistingname{Elenco dei codici}
\addtocontents{toc}{\protect\setcounter{tocdepth}{-1}}
\listoffigures
\addtocontents{toc}{\protect\setcounter{tocdepth}{-1}}
\lstlistoflistings{}
\addtocontents{toc}{\protect\setcounter{tocdepth}{-1}}
%\listoftables
%\addtocontents{toc}{\protect\setcounter{tocdepth}{-1}}
\printglossary[type=\acronymtype]
\addtocontents{toc}{\protect\setcounter{tocdepth}{-1}}
\addtocontents{toc}{\protect\setcounter{tocdepth}{3}}
\endgroup

\pagenumbering{arabic}
% Don't touch! These commands needs to fix toc!!
\chapter*{}
\thispagestyle{empty}
\setcounter{page}{0} % Don't touch! The real first page is 1, 0 is a phantom page needed to fix toc!!
\include{introduction}
\include{chapter_1}
\include{chapter_2}
\include{chapter_3}
\include{chapter_4}
\include{chapter_5}
\include{ending}
\include{acknoweldgements}

\cleardoublepage{}
\bibliographystyle{unsrt}
\phantomsection{}
\addcontentsline{toc}{chapter}{Bibliografia}
\bibliography{bibliografia}
\end{document}
